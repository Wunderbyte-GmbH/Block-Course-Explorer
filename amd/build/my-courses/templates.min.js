define("block_course_explorer/my-courses/templates",["exports","core/notification","jquery"],(function(_exports,_notification,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.courseCardTemplate=void 0,_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery);_exports.courseCardTemplate=values=>{const elementDefinition=`\n  <div class="card course-card ${values.userEnrolled?"to-course":"enrol-into-course"}" data-id="${values.id}" tabindex="0">\n    <div class="card-content">\n    <div class="card-front">\n      ${courseCardFrontTemplate(values)}\n    </div>\n    </div>\n  </div>`,element=(0,_jquery.default)(elementDefinition),clickHandler=function(){let url;values.userEnrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):(url="/blocks/course_explorer/ajax/enrol_user_into_course.php?courseid="+values.id,fetch(url,{method:"GET"}).then((response=>response.json())).then((result=>(result.enrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):_notification.default.alert("Error",result.errormessage,"Close"),console.log(result)))).catch((error=>console.log(error))))};return element.click(clickHandler),element.keyup((event=>{event.originalEvent instanceof KeyboardEvent&&"enter"!==event.key.toLocaleLowerCase()||clickHandler()})),element};const truncateString=(str,length)=>str.length<=length?str:str.slice(0,length)+"...",courseCardFrontTemplate=_ref=>{var _topics,_topics2;let{title:title,MCOriginal:MCOriginal,image:image,description:description,score:score,reviewsnum:reviewsnum,senderName:senderName,courseType:courseType,duration:duration,topics:topics,favourite:favourite}=_ref;title=truncateString(title,100);let courseCardDescription=(description=>""!==description.trim()?description:"lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit.")(description);courseCardDescription=truncateString(courseCardDescription,150),topics=null===(_topics=topics)||void 0===_topics?void 0:_topics.map((topic=>topic.value));return console.log("test"),(0,_jquery.default)(`\n        <div class="card shadow-sm rounded" style="width: 20rem;">\n          <div class="position-relative">\n            ${image?`<img src="${image}" class="card-img-top" alt="">`:'<img src="https://picsum.photos/2124" class="card-img-top" alt="">'}\n            ${MCOriginal?'<span class="badge badge-warning font-weight-bold position-absolute" style="top: 0.5rem; right: 0.5rem;">MC-Original</span>':""}\n          </div>\n          <div class="card-body bg-light">\n            <small class="text-uppercase text-muted">Material</small>\n            <h5 class="card-title mt-1 font-weight-bold text-dark">${title}</h5>\n            <p class="card-text mb-1"><strong>${senderName}</strong></p>\n            <div class="d-flex flex-wrap text-muted mb-2 small">\n              <div class="mr-3 d-flex align-items-center">\n                <i class="fa fa-graduation-cap mr-1"></i> ${courseType}\n              </div>\n              <div class="mr-3 d-flex align-items-center">\n                <i class="fa fa-clock-o mr-1"></i> ${duration}\n              </div>\n              <div class="d-flex align-items-center">\n                ${getRating(score,reviewsnum)}\n              </div>\n            </div>\n            <p class="card-text">${courseCardDescription}</p>\n            ${(null===(_topics2=topics)||void 0===_topics2?void 0:_topics2.length)>0?`\n              <div class="d-flex align-items-center mt-2">\n                <i class="fa fa-tag mr-2 text-muted"></i>\n                <span class="text-muted">${topics.join(", ")}</span>\n              </div>`:""}\n          </div>\n        </div>\n      `)},getRating=(score,reviewsnum)=>{let firstStarClass="fa-star-o",secondStarClass="fa-star-o",thirdStarClass="fa-star-o";return score&&((score*=.6)<.75?firstStarClass="fa-star-half-o":score<1.25?firstStarClass="fa-star":score<1.75?(firstStarClass="fa-star",secondStarClass="fa-star-half-o"):score<2.25?(firstStarClass="fa-star",secondStarClass="fa-star"):score<2.75?(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star-half-o"):(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star")),`<i class="fa ${firstStarClass}"></i>\n            <i class="fa ${secondStarClass}"></i>\n            <i class="fa ${thirdStarClass} mr-1"></i>\n            <span>(${reviewsnum=reviewsnum??0})</span>`}}));

//# sourceMappingURL=templates.min.js.map