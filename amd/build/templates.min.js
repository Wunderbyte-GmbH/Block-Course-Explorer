define("block_course_explorer/templates",["exports","core/notification","jquery"],(function(_exports,_notification,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.dropDownTemplate=_exports.courseCardTemplate=void 0,_notification=_interopRequireDefault(_notification),_jquery=_interopRequireDefault(_jquery);_exports.courseCardTemplate=values=>{const elementDefinition=`\n    <div class="card course-card ${values.userEnrolled?"to-course":"enrol-into-course"}" data-id="${values.id}" tabindex="0">\n        <div class="card-content"></div>\n    </div>`,element=(0,_jquery.default)(elementDefinition),frontTemplate=courseCardFrontTemplate(values);element.find(".card-content").append(frontTemplate);const clickHandler=function(){let url;values.userEnrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):(url="/blocks/course_explorer/ajax/enrol_user_into_course.php?courseid="+values.id,fetch(url,{method:"GET"}).then((response=>response.json())).then((result=>(result.enrolled?(url="/course/view.php?id="+values.id,window.location.href=window.location.href.replace(window.location.pathname,url)):_notification.default.alert("Error",result.errormessage,"Close"),console.log(result)))).catch((error=>console.log(error))))};return element.click(clickHandler),element.keyup((event=>{event.originalEvent instanceof KeyboardEvent&&"enter"!==event.key.toLocaleLowerCase()||clickHandler()})),element};const truncateString=(str,length)=>str.length<=length?str:str.slice(0,length)+"...",courseCardFrontTemplate=_ref=>{let{title:title,mcoriginal:mcoriginal,image:image,description:description,score:score,reviewsnum:reviewsnum,senderName:senderName,mc_moodle_format:mc_moodle_format,mc_moodle_kursdauer:mc_moodle_kursdauer,mc_moodle_themen:mc_moodle_themen}=_ref;title=truncateString(title,100);let courseCardDescription=(description=>""!==description.trim()?description:"lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit. lorem ipsum dolor sit amet, consectetur adipiscing elit.")(description);courseCardDescription=truncateString(courseCardDescription,150);const courseType=mc_moodle_format,duration=mc_moodle_kursdauer,topics=null==mc_moodle_themen?void 0:mc_moodle_themen.map((topic=>topic.value));return console.log("test"),(0,_jquery.default)(`\n        <div class="card shadow-sm rounded" style="width: 20rem;">\n          <div class="position-relative">\n            ${image?`<img src="${image}" class="card-img-top" alt="">`:'<img src="https://picsum.photos/2124" class="card-img-top" alt="">'}\n            <span class="badge badge-light position-absolute" style="top: 0.5rem; left: 0.5rem;">ko-kreativ</span>\n            ${mcoriginal?'<span class="badge badge-warning font-weight-bold position-absolute" style="top: 0.5rem; right: 0.5rem;">MC-Original</span>':""}\n          </div>\n          <div class="card-body bg-light">\n            <small class="text-uppercase text-muted">Material</small>\n            <h5 class="card-title mt-1 font-weight-bold text-dark">${title}</h5>\n            <p class="card-text mb-1"><strong>${senderName}</strong></p>\n            <div class="d-flex flex-wrap text-muted mb-2 small">\n              <div class="mr-3 d-flex align-items-center">\n                <i class="fa fa-graduation-cap mr-1"></i> ${courseType}\n              </div>\n              <div class="mr-3 d-flex align-items-center">\n                <i class="fa fa-clock-o mr-1"></i> ${duration}\n              </div>\n              <div class="d-flex align-items-center">\n                ${getRating(score,reviewsnum)}\n              </div>\n            </div>\n            <p class="card-text">${courseCardDescription}</p>\n            ${(null==topics?void 0:topics.length)>0?`\n              <div class="d-flex align-items-center mt-2">\n                <i class="fa fa-tag mr-2 text-muted"></i>\n                <span class="text-muted">${topics.join(", ")}</span>\n              </div>`:""}\n          </div>\n        </div>\n      `)},getRating=(score,reviewsnum)=>{let firstStarClass="fa-star-o",secondStarClass="fa-star-o",thirdStarClass="fa-star-o";return score&&((score*=.6)<.75?firstStarClass="fa-star-half-o":score<1.25?firstStarClass="fa-star":score<1.75?(firstStarClass="fa-star",secondStarClass="fa-star-half-o"):score<2.25?(firstStarClass="fa-star",secondStarClass="fa-star"):score<2.75?(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star-half-o"):(firstStarClass="fa-star",secondStarClass="fa-star",thirdStarClass="fa-star")),`<i class="fa ${firstStarClass}"></i>\n            <i class="fa ${secondStarClass}"></i>\n            <i class="fa ${thirdStarClass} mr-1"></i>\n            <span>(${reviewsnum=reviewsnum??0})</span>`};_exports.dropDownTemplate=_ref2=>{let{title:title,caption:caption,options:options,onOptionChange:onOptionChange,selectedOption:selectedOption,onReset:onReset,className:className=""}=_ref2,dropDown=(0,_jquery.default)(`<div class="dropdown-container ${className}"></div>`);if(selectedOption){const resetDropdown=(0,_jquery.default)("<button class='btn reset-dropdown'><i class='fa fa-times'></i></button>");resetDropdown.click(onReset),dropDown.append(resetDropdown)}dropDown.append(`\n    <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown" \n    style="width: 100%;" aria-haspopup="true" aria-expanded="false" title="${title}">\n        <div class="text-container" data-active-item-text>\n            <div class="text">${caption}</div>\n        </div>\n    </button>`);const optionsMenu=(0,_jquery.default)('<div role="menu" class="dropdown-menu dropdown-menu-right list-group hidden" \n    data-show-active-item data-skip-active-class="true"></div>');return options.forEach((option=>{const disabledAttribute=null!=option&&option.disabled?"disabled":"",isActive=(null==selectedOption?void 0:selectedOption.id)===option.id,dropdownItem=(0,_jquery.default)(`\n        <a class="dropdown-item ${disabledAttribute}" data-value="${option.id}" \n        aria-current="${isActive}" tabindex="-1" role="menuitem">\n            ${option.name}\n        </a>`);dropdownItem.click((()=>onOptionChange(dropdownItem.data().value))),dropdownItem.keydown((event=>event.originalEvent instanceof KeyboardEvent&&"enter"===event.key.toLocaleLowerCase()?onOptionChange(dropdownItem.data().value):null)),optionsMenu.append(dropdownItem)})),dropDown.append(optionsMenu),dropDown}}));

//# sourceMappingURL=templates.min.js.map